{{ define "main" }}
<div class="container">
  {{/* Section Header */}}
  <header class="blog-header">
    <h1 class="blog-header__title">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M4 19.5A2.5 2.5 0 016.5 17H20"></path>
        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z"></path>
      </svg>
      {{ .Title }}
    </h1>
    {{ with .Content }}
    <p class="blog-header__desc">{{ . | plainify }}</p>
    {{ else }}
    <p class="blog-header__desc">Tất cả bài viết về Java, JavaScript và Web Development</p>
    {{ end }}
  </header>

  {{/* Filter Tags */}}
  {{ if .Site.Taxonomies.tags }}
  <div class="blog-filters">
    <div class="filter-tags">
      <a href="{{ "blog/" | relURL }}" class="filter-tag filter-tag--active">Tất cả</a>
      {{ range $name, $taxonomy := .Site.Taxonomies.tags }}
      <a href="{{ "/tags/" | relLangURL }}{{ $name | urlize }}/" class="filter-tag">{{ $name }}</a>
      {{ end }}
    </div>
  </div>
  {{ end }}
  
  {{/* Posts Grid */}}
  {{ $paginator := .Paginate .Pages }}
  {{ if $paginator.Pages }}
  <div class="posts-grid">
    {{ range $index, $post := $paginator.Pages }}
    <article class="post-card {{ if eq $index 0 }}post-card--featured{{ end }}">
      <div class="post-card__image">
        {{ with $post.Params.featured_image }}
        <img src="{{ . }}" alt="{{ $post.Title }}" loading="lazy">
        {{ else }}
        <div class="post-card__placeholder">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <circle cx="8.5" cy="8.5" r="1.5"></circle>
            <polyline points="21 15 16 10 5 21"></polyline>
          </svg>
        </div>
        {{ end }}
        <div class="post-card__category">
          {{ with $post.Params.categories }}{{ index . 0 }}{{ end }}
        </div>
      </div>
      <div class="post-card__content">
        <div class="post-card__meta">
          <time datetime="{{ $post.Date.Format "2006-01-02" }}">
            {{ $post.Date.Format "02/01/2006" }}
          </time>
          <span class="post-card__dot">•</span>
          <span>{{ $post.ReadingTime }} phút đọc</span>
        </div>
        <h3 class="post-card__title">
          <a href="{{ $post.Permalink }}">{{ $post.Title }}</a>
        </h3>
        <p class="post-card__excerpt">
          {{ with $post.Params.summary }}{{ . | truncate 150 }}{{ else }}{{ $post.Summary | plainify | truncate 150 }}{{ end }}
        </p>
        <div class="post-card__tags">
          {{ range first 3 $post.Params.tags }}
          <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}/" class="tag">{{ . }}</a>
          {{ end }}
        </div>
      </div>
    </article>
    {{ end }}
  </div>
  
  {{/* Pagination */}}
  {{ if gt $paginator.TotalPages 1 }}
  <nav class="pagination" aria-label="Pagination">
    {{ if $paginator.HasPrev }}
    <a href="{{ $paginator.Prev.URL }}" class="pagination__link" aria-label="Previous page">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="15,18 9,12 15,6"></polyline>
      </svg>
      Trước
    </a>
    {{ end }}
    
    <span class="pagination__info">
      Trang {{ $paginator.PageNumber }} / {{ $paginator.TotalPages }}
    </span>
    
    {{ if $paginator.HasNext }}
    <a href="{{ $paginator.Next.URL }}" class="pagination__link" aria-label="Next page">
      Sau
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="9,18 15,12 9,6"></polyline>
      </svg>
    </a>
    {{ end }}
  </nav>
  {{ end }}
  
  {{ else }}
  <div class="empty-state">
    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
      <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"></path>
      <polyline points="14 2 14 8 20 8"></polyline>
      <line x1="16" y1="13" x2="8" y2="13"></line>
      <line x1="16" y1="17" x2="8" y2="17"></line>
    </svg>
    <h3>Chưa có bài viết nào</h3>
    <p>Hãy tạo bài viết đầu tiên với <code>hugo new blog/my-post.md</code></p>
  </div>
  {{ end }}
</div>

<style>
/* Blog Page Specific Styles */
.blog-header {
  text-align: center;
  padding: var(--space-12) 0 var(--space-8);
}

.blog-header__title {
  display: inline-flex;
  align-items: center;
  gap: var(--space-3);
  font-size: var(--font-size-4xl);
  margin-bottom: var(--space-4);
}

.blog-header__title svg {
  color: var(--color-primary-500);
}

.blog-header__desc {
  font-size: var(--font-size-lg);
  color: var(--color-text-secondary);
  max-width: 600px;
  margin: 0 auto;
}

.blog-filters {
  padding-bottom: var(--space-8);
  border-bottom: 1px solid var(--color-border);
  margin-bottom: var(--space-8);
}

.filter-tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  justify-content: center;
}

.filter-tag {
  padding: var(--space-2) var(--space-4);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-full);
  text-decoration: none;
  transition: all var(--transition-fast);
}

.filter-tag:hover,
.filter-tag--active {
  background: var(--color-primary-500);
  border-color: var(--color-primary-500);
  color: white;
}

.pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-4);
  margin-top: var(--space-12);
  padding-top: var(--space-8);
  border-top: 1px solid var(--color-border);
}

.pagination__link {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-4);
  font-size: var(--font-size-sm);
  color: var(--color-text-primary);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  text-decoration: none;
  transition: all var(--transition-fast);
}

.pagination__link:hover {
  background: var(--color-primary-500);
  border-color: var(--color-primary-500);
  color: white;
}

.pagination__info {
  font-size: var(--font-size-sm);
  color: var(--color-text-muted);
}
</style>
{{ end }}
