{{ define "main" }}
<!-- BlogPage - Converted from BlogPage.tsx -->
<div class="blog-page">
  <div class="container">
    
    <!-- Header -->
    <header class="page-header reveal">
      <div class="page-icon-wrapper">
        <svg class="page-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/>
        </svg>
      </div>
      <h1 class="page-title gradient-text">Blog</h1>
      <p class="page-subtitle">
        Khám phá các bài viết về lập trình, công nghệ và kinh nghiệm thực tế.
      </p>
    </header>

    <!-- Filter Tags -->
    <div class="filter-tags reveal">
      <a href="{{ .Permalink }}" class="filter-tag active">Tất cả</a>
      {{ range .Site.Taxonomies.tags }}
      <a href="{{ .Page.Permalink }}" class="filter-tag">{{ .Page.Title }}</a>
      {{ end }}
    </div>

    <!-- Blog Posts -->
    <div class="blog-posts">
      {{ $paginator := .Paginate (where .Site.RegularPages "Section" "blog") }}
      {{ range $paginator.Pages }}
      <article class="blog-post-card glass-card reveal">
        <!-- Thumbnail -->
        <div class="post-thumbnail">
          <div class="post-thumbnail-overlay"></div>
          <svg class="post-thumbnail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/>
          </svg>
        </div>

        <div class="post-content">
          <!-- Category -->
          {{ with .Params.categories }}
          <div class="post-category">
            {{ range first 1 . }}
            <span class="glass-tag">{{ . }}</span>
            {{ end }}
          </div>
          {{ end }}

          <!-- Title -->
          <h2 class="post-title-lg">{{ .Title }}</h2>

          <!-- Excerpt -->
          <p class="post-excerpt-lg">{{ .Summary | plainify | truncate 160 }}</p>

          <!-- Info -->
          <div class="post-info">
            <span class="post-info-item">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
                <line x1="16" x2="16" y1="2" y2="6"/>
                <line x1="8" x2="8" y1="2" y2="6"/>
                <line x1="3" x2="21" y1="10" y2="10"/>
              </svg>
              {{ .Date.Format "02/01/2006" }}
            </span>
            <span class="post-info-item">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
              </svg>
              {{ .ReadingTime }} phút đọc
            </span>
          </div>

          <!-- Tags -->
          <div class="post-tags-list">
            {{ range .Params.tags }}
            <a href="{{ "tags/" | relURL }}{{ . | urlize }}/" class="post-tag-item">#{{ . }}</a>
            {{ end }}
          </div>

          <!-- CTA -->
          <a href="{{ .Permalink }}" class="btn-primary btn-full">
            Đọc bài viết
          </a>
        </div>
      </article>
      {{ else }}
      <div class="empty-state glass-card">
        <p>Chưa có bài viết nào. Tạo bài viết đầu tiên!</p>
      </div>
      {{ end }}
    </div>

    <!-- Sidebar -->
    <div class="blog-sidebar reveal">
      <!-- Categories -->
      <aside class="sidebar-card glass-card-sm">
        <h3 class="sidebar-title">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/>
            <line x1="7" x2="7.01" y1="7" y2="7"/>
          </svg>
          Danh mục
        </h3>
        <div class="sidebar-list">
          {{ range .Site.Taxonomies.categories }}
          <a href="{{ .Page.Permalink }}" class="sidebar-list-item">
            <span>{{ .Page.Title }}</span>
            <span class="sidebar-count">{{ .Count }}</span>
          </a>
          {{ else }}
          <p class="text-muted">Chưa có danh mục</p>
          {{ end }}
        </div>
      </aside>

      <!-- Popular Tags -->
      <aside class="sidebar-card glass-card-sm">
        <h3 class="sidebar-title">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.3-4.3"/>
          </svg>
          Tags phổ biến
        </h3>
        <div class="sidebar-tags">
          {{ range .Site.Taxonomies.tags }}
          <a href="{{ .Page.Permalink }}" class="glass-tag">{{ .Page.Title }}</a>
          {{ end }}
        </div>
      </aside>
    </div>

    <!-- Pagination -->
    {{ if gt $paginator.TotalPages 1 }}
    <nav class="pagination reveal" aria-label="Page navigation">
      {{ if $paginator.HasPrev }}
      <a href="{{ $paginator.Prev.URL }}" class="btn-glass">&larr; Trước</a>
      {{ end }}
      <span class="pagination-info">
        Trang {{ $paginator.PageNumber }} / {{ $paginator.TotalPages }}
      </span>
      {{ if $paginator.HasNext }}
      <a href="{{ $paginator.Next.URL }}" class="btn-glass">Tiếp &rarr;</a>
      {{ end }}
    </nav>
    {{ end }}

  </div>
</div>

<style>
/* ===== Blog Page Layout ===== */
.blog-page {
  min-height: 100vh;
  padding-top: 8rem;
  padding-bottom: 5rem;
}

/* ===== Page Header ===== */
.page-header {
  text-align: center;
  margin-bottom: var(--space-16);
}

.page-icon-wrapper {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-3);
  background: linear-gradient(135deg, var(--amber-600), var(--amber-500));
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-amber);
  margin-bottom: var(--space-6);
}

.page-icon {
  width: 32px;
  height: 32px;
  color: white;
  flex-shrink: 0;
}

.page-title {
  font-size: var(--text-5xl);
  font-weight: var(--font-bold);
  margin-bottom: var(--space-4);
}

.page-subtitle {
  font-size: var(--text-xl);
  color: var(--gray-600);
  max-width: 42rem;
  margin: 0 auto;
}

[data-theme="dark"] .page-subtitle {
  color: var(--gray-300);
}

/* ===== Filter Tags ===== */
.filter-tags {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: var(--space-3);
  margin-bottom: var(--space-12);
}

.filter-tag {
  padding: var(--space-2) var(--space-6);
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-full);
  font-weight: var(--font-medium);
  color: var(--gray-700);
  transition: all var(--transition-normal);
}

[data-theme="dark"] .filter-tag {
  background: rgba(17, 24, 39, 0.3);
  border-color: rgba(55, 65, 81, 0.3);
  color: var(--gray-300);
}

.filter-tag:hover,
.filter-tag.active {
  background: rgba(245, 158, 11, 0.2);
  border-color: rgba(245, 158, 11, 0.3);
  color: var(--amber-600);
}

[data-theme="dark"] .filter-tag:hover,
[data-theme="dark"] .filter-tag.active {
  color: var(--amber-400);
}

/* ===== Blog Posts ===== */
.blog-posts {
  max-width: 56rem;
  margin: 0 auto var(--space-12);
}

.blog-post-card {
  overflow: hidden;
  margin-bottom: var(--space-8);
  transition: all var(--transition-slow);
}

.blog-post-card:hover {
  transform: translateY(-4px);
}

/* ===== Post Thumbnail ===== */
.post-thumbnail {
  height: 16rem;
  background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(251, 146, 60, 0.2));
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
}

.post-thumbnail-overlay {
  position: absolute;
  inset: 0;
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

[data-theme="dark"] .post-thumbnail-overlay {
  background: rgba(17, 24, 39, 0.1);
}

.post-thumbnail-icon {
  width: 80px;
  height: 80px;
  color: rgba(245, 158, 11, 0.5);
  position: relative;
  z-index: 1;
}

/* ===== Post Content ===== */
.post-content {
  padding: var(--space-8);
}

.post-category {
  margin-bottom: var(--space-4);
}

.post-title-lg {
  font-size: var(--text-3xl);
  font-weight: var(--font-bold);
  margin-bottom: var(--space-4);
  color: var(--gray-900);
  transition: color var(--transition-fast);
}

[data-theme="dark"] .post-title-lg {
  color: white;
}

.post-title-lg:hover {
  color: var(--amber-600);
}

[data-theme="dark"] .post-title-lg:hover {
  color: var(--amber-400);
}

.post-excerpt-lg {
  color: var(--gray-600);
  margin-bottom: var(--space-6);
  line-height: 1.6;
}

[data-theme="dark"] .post-excerpt-lg {
  color: var(--gray-400);
}

/* ===== Post Info ===== */
.post-info {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-6);
  font-size: var(--text-sm);
  color: var(--gray-500);
  margin-bottom: var(--space-6);
  padding-bottom: var(--space-6);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .post-info {
  color: var(--gray-400);
  border-color: rgba(55, 65, 81, 0.2);
}

.post-info-item {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.post-info-item svg {
  width: 16px;
  height: 16px;
}

/* ===== Post Tags ===== */
.post-tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  margin-bottom: var(--space-6);
}

.post-tag-item {
  padding: var(--space-1) var(--space-3);
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-lg);
  font-size: var(--text-xs);
  color: var(--gray-700);
  transition: all var(--transition-fast);
}

[data-theme="dark"] .post-tag-item {
  background: rgba(17, 24, 39, 0.3);
  border-color: rgba(55, 65, 81, 0.3);
  color: var(--gray-300);
}

.post-tag-item:hover {
  background: rgba(245, 158, 11, 0.2);
  border-color: rgba(245, 158, 11, 0.3);
}

/* ===== Full Width Button ===== */
.btn-full {
  width: 100%;
}

/* ===== Blog Sidebar ===== */
.blog-sidebar {
  display: grid;
  grid-template-columns: repeat(1, 1fr);
  gap: var(--space-6);
  max-width: 56rem;
  margin: 0 auto;
}

@media (min-width: 768px) {
  .blog-sidebar {
    grid-template-columns: repeat(2, 1fr);
  }
}

.sidebar-card {
  padding: var(--space-6);
}

.sidebar-title {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-weight: var(--font-semibold);
  margin-bottom: var(--space-4);
  color: var(--gray-900);
}

[data-theme="dark"] .sidebar-title {
  color: white;
}

.sidebar-title svg {
  width: 20px;
  height: 20px;
  color: var(--amber-500);
}

.sidebar-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.sidebar-list-item {
  display: flex;
  justify-content: space-between;
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-lg);
  color: var(--gray-700);
  transition: background var(--transition-fast);
}

[data-theme="dark"] .sidebar-list-item {
  color: var(--gray-300);
}

.sidebar-list-item:hover {
  background: rgba(245, 158, 11, 0.2);
}

.sidebar-count {
  color: var(--amber-600);
}

[data-theme="dark"] .sidebar-count {
  color: var(--amber-400);
}

.sidebar-tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

/* ===== Pagination ===== */
.pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-4);
  margin-top: var(--space-12);
}

.pagination-info {
  color: var(--gray-500);
}

/* ===== Empty State ===== */
.empty-state {
  text-align: center;
  padding: var(--space-12);
  color: var(--gray-500);
}
</style>
{{ end }}
